CREATE OR REPLACE TYPE COURSE_VA  AS VARRAY(5) OF VARCHAR2(20);

create table STDCOURSE(STUD_ID  number(4), COURSENM COURSE_VA);

SELECT COLUMN_NAME, DATA_TYPE FROM USER_TAB_COLUMNS WHERE TABLE_NAME='STDCOURSE';

select TYPECODE, ATTRIBUTES from USER_TYPES where TYPE_NAME='COURSE_VA';

select COLL_TYPE, ELEM_TYPE_OWNER, ELEM_TYPE_NAME, UPPER_BOUND, LENGTH FROM USER_COLL_TYPES WHERE TYPE_NAME='COURSE_VA';

INSERT INTO STDCOURSE VALUES(1, COURSE_VA('C', 'RDBMS', 'C++'));
INSERT INTO STDCOURSE VALUES(1, COURSE_VA('VB', 'C', 'C++', 'RDBMS', 'JAVA'));
INSERT INTO STDCOURSE VALUES(1, COURSE_VA('C', 'VB', 'RDMBS'));

SELECT * FROM STDCOURSE;

DECLARE
CURSOR C1 IS SELECT * FROM STDCOURSE;
BEGIN
FOR R IN C1
LOOP
    DBMS_OUTPUT.PUT_LINE('STUDENT_ID:'|| R.STUD_ID);
    FOR I IN 1..R.COURSENM.COUNT
    LOOP
        DBMS_OUTPUT.PUT_LINE('SUBJECT:'|| R.COURSENM(I));
        END LOOP;
    DBMS_OUTPUT.PUT_LINE('--------------------------------');
    END LOOP;
END;

CREATE OR REPLACE TYPE COURSE_PG AS OBJECT(COURSENAME VARCHAR2(20), MARKS NUMBER(3));
    
CREATE TYPE COURSE_NT AS TABLE OF COURSE_PG;

CREATE TABLE COURSEMARKS (STUD_ID NUMBER(4), COURSE_MARKS COURSE_NT)
NESTED TABLE COURSE_MARKS STORE AS COURRSE_NT_TAB;

INSERT INTO COURSEMARKS VALUES
(1, COURSE_NT(
                COURSE_PG('C', 50),
                COURSE_PG('RDBMS', 75),
                COURSE_PG('DS', 80)
            ) 
);

SELECT NT.MARKS
FROM THE(SELECT COURSE_MARKS
                FROM COURSEMARKS WHERE STUD_ID=1) NT
WHERE NT.COURSENAME = 'RDBMS';
